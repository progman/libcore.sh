#!/bin/bash
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# general function
function main()
{
	mv logger.go  swagger_logger.go  &> /dev/null < /dev/null;
	mv routers.go swagger_routers.go &> /dev/null < /dev/null;


	for FILE in $(ls -1 | grep ^api);
	do
#		echo "${FILE}";
		mv "${FILE}" "swagger_${FILE}";
	done


# create temp dir and files
	local LOCAL_TMPDIR="/tmp";
	if [ "${TMPDIR}" != "" ] && [ -d "${TMPDIR}" ];
	then
		LOCAL_TMPDIR="${TMPDIR}";
	fi




	for FILE in $(ls -1 | grep ^swagger);
	do
#		echo "${FILE}";


		local TMP
		TMP="$(mktemp --tmpdir="${REPACK_TMPDIR}" 2> /dev/null)";
		if [ "${?}" != "0" ];
		then
			echo "can't make tmp file";
			return 1;
		fi


		cat "${FILE}" | sed -e 's/package main/package main/g' > "${TMP}";
		mv "${TMP}" "${FILE}";


		rm -rf -- "${TMP}";
	done


	return 0;
}
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
main "${@}";

exit "${?}";
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
