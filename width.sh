#!/bin/bash
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# 0.0.1
# Alexey Potehin <gnuplanet@gmail.com>, http://www.gnuplanet.ru/doc/cv
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# check depends
function check_prog()
{
	for i in ${1};
	do
		if [ "$(command -v ${i})" == "" ];
		then
			echo "FATAL: you must install \"${i}\"...";
			return 1;
		fi
	done

	return 0;
}
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# general function
function main()
{
	if [ "${1}" == "" ] && [ "${2}" == "" ];
	then
		echo "width filter";
		echo "example: echo -e \"1\n12\n123\" | ${0} [ MIN ] MAX";
		return 1;
	fi


# check depends tools
	check_prog "echo wc";
	if [ "${?}" != "0" ];
	then
		return 1;
	fi


	local MIN;
	local MAX;
	local TMP;
	local LINE;
	local WIDTH;


	if [ "${1}" != "" ] && [ "${2}" == "" ];
	then
		MIN=0;
		MAX="${1}";
	fi


	if [ "${1}" != "" ] && [ "${2}" != "" ];
	then
		MIN="${1}";
		MAX="${2}";
	fi


	if [ "${MIN}" -gt "${MAX}" ]; # INTEGER1 is greater than INTEGER2
	then
		TMP="${MIN}";
		MIN="${MAX}";
		MAX="${TMP}";
	fi


#	echo "MIN: \"${MIN}\"";
#	echo "MAX: \"${MAX}\"";

	while read -r LINE;
	do
#		echo "LINE: \"${LINE}\"";
		WIDTH="${#LINE}";


		if [ "${MIN}" != "" ] && [ "${MAX}" != "" ];
		then
			if [ ${MIN} -gt ${WIDTH} ]; # INTEGER1 is greater than INTEGER2
			then
				continue;
			fi

			if [ ${MAX} -lt ${WIDTH} ]; # INTEGER1 is less than INTEGER2
			then
				continue;
			fi
		fi


		echo "${LINE}";
	done

	return 0;
}
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
main "${@}";

exit "${?}";
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
